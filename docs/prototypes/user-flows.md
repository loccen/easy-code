# 易码网用户流程图

## 1. 用户注册和认证流程

### 1.1 新用户注册流程
```mermaid
flowchart TD
    A[访问首页] --> B{是否已有账户?}
    B -->|否| C[点击注册按钮]
    B -->|是| D[点击登录按钮]
    
    C --> E[填写注册表单]
    E --> F[邮箱/用户名/密码]
    F --> G[提交注册]
    G --> H{表单验证}
    H -->|失败| I[显示错误信息]
    I --> E
    H -->|成功| J[发送验证邮件]
    J --> K[显示验证提示]
    K --> L[用户查收邮件]
    L --> M[点击验证链接]
    M --> N[邮箱验证成功]
    N --> O[自动登录]
    O --> P[进入用户中心]
    
    D --> Q[填写登录表单]
    Q --> R[邮箱/密码]
    R --> S[提交登录]
    S --> T{认证验证}
    T -->|失败| U[显示错误信息]
    U --> Q
    T -->|成功| V{是否启用2FA?}
    V -->|是| W[输入2FA代码]
    V -->|否| O
    W --> X{2FA验证}
    X -->|失败| Y[显示错误信息]
    Y --> W
    X -->|成功| O
```

### 1.2 第三方登录流程
```mermaid
flowchart TD
    A[选择第三方登录] --> B[GitHub/Google/微信]
    B --> C[跳转到第三方授权页面]
    C --> D{用户授权}
    D -->|拒绝| E[返回登录页面]
    D -->|同意| F[获取用户信息]
    F --> G{账户是否存在?}
    G -->|是| H[直接登录]
    G -->|否| I[创建新账户]
    I --> J[补充必要信息]
    J --> K[完成注册]
    K --> H
    H --> L[进入用户中心]
```

## 2. 买家购买流程

### 2.1 项目发现和购买流程
```mermaid
flowchart TD
    A[浏览项目市场] --> B[搜索/筛选项目]
    B --> C[查看项目列表]
    C --> D[点击感兴趣的项目]
    D --> E[查看项目详情]
    E --> F{是否需要演示?}
    F -->|是| G[创建演示环境]
    G --> H[等待部署完成]
    H --> I[访问演示链接]
    I --> J[测试项目功能]
    J --> K{是否满意?}
    K -->|否| L[继续浏览其他项目]
    K -->|是| M[点击购买按钮]
    F -->|否| M
    
    M --> N{是否已登录?}
    N -->|否| O[跳转登录页面]
    O --> P[完成登录]
    P --> Q[返回购买页面]
    N -->|是| Q
    
    Q --> R[确认订单信息]
    R --> S[选择支付方式]
    S --> T[填写支付信息]
    T --> U[提交支付]
    U --> V{支付是否成功?}
    V -->|否| W[显示支付失败]
    W --> S
    V -->|是| X[支付成功]
    X --> Y[生成订单]
    Y --> Z[发送确认邮件]
    Z --> AA[跳转下载页面]
    AA --> BB[下载项目文件]
    
    L --> C
```

### 2.2 演示环境使用流程
```mermaid
flowchart TD
    A[点击演示按钮] --> B{是否已登录?}
    B -->|否| C[跳转登录]
    C --> D[完成登录]
    D --> E[返回项目页面]
    B -->|是| E
    
    E --> F[确认演示请求]
    F --> G[检查积分余额]
    G --> H{积分是否足够?}
    H -->|否| I[提示充值积分]
    I --> J[跳转充值页面]
    J --> K[完成充值]
    K --> F
    H -->|是| L[扣除积分]
    L --> M[创建Docker容器]
    M --> N[部署到K8s集群]
    N --> O[分配临时域名]
    O --> P[显示演示链接]
    P --> Q[用户访问演示]
    Q --> R[显示剩余时间]
    R --> S{是否需要延时?}
    S -->|是| T[选择延时时长]
    T --> U[扣除额外积分]
    U --> V[延长演示时间]
    V --> Q
    S -->|否| W[继续使用]
    W --> X{时间是否到期?}
    X -->|否| Q
    X -->|是| Y[自动销毁环境]
    Y --> Z[显示到期提示]
```

## 3. 卖家上架流程

### 3.1 项目上架流程
```mermaid
flowchart TD
    A[进入卖家中心] --> B[点击上架新项目]
    B --> C[填写项目基本信息]
    C --> D[标题/描述/分类/价格]
    D --> E[上传项目文件]
    E --> F{是否Docker化?}
    F -->|是| G[自动检测Docker配置]
    G --> H{检测是否通过?}
    H -->|是| I[进入快速通道]
    H -->|否| J[提示配置问题]
    J --> K[修复配置]
    K --> G
    F -->|否| L[进入AI辅助通道]
    
    I --> M[自动构建镜像]
    M --> N[安全扫描]
    N --> O{扫描是否通过?}
    O -->|否| P[显示安全问题]
    P --> Q[修复安全问题]
    Q --> E
    O -->|是| R[自动审核]
    R --> S[发布到市场]
    S --> T[获得双倍积分]
    
    L --> U[AI分析项目结构]
    U --> V[生成Docker化建议]
    V --> W[卖家确认改造方案]
    W --> X{是否同意改造?}
    X -->|否| Y[手动修改项目]
    Y --> E
    X -->|是| Z[平台协助改造]
    Z --> AA[生成Dockerfile]
    AA --> BB[测试构建]
    BB --> CC{构建是否成功?}
    CC -->|否| DD[反馈问题]
    DD --> Z
    CC -->|是| EE[提交人工审核]
    EE --> FF[审核员审核]
    FF --> GG{审核是否通过?}
    GG -->|否| HH[反馈修改意见]
    HH --> Y
    GG -->|是| II[发布到市场]
    II --> JJ[获得标准积分]
    
    T --> KK[通知卖家]
    JJ --> KK
    KK --> LL[项目上架成功]
```

### 3.2 项目管理流程
```mermaid
flowchart TD
    A[进入项目管理] --> B[查看项目列表]
    B --> C[选择要管理的项目]
    C --> D[查看项目详情]
    D --> E{选择操作}
    E -->|编辑| F[修改项目信息]
    E -->|更新| G[上传新版本]
    E -->|下架| H[下架项目]
    E -->|查看数据| I[查看销售统计]
    
    F --> J[修改标题/描述/价格]
    J --> K[保存修改]
    K --> L[更新成功]
    
    G --> M[上传新文件]
    M --> N[填写更新说明]
    N --> O[提交审核]
    O --> P[等待审核结果]
    P --> Q{审核是否通过?}
    Q -->|是| R[发布新版本]
    Q -->|否| S[修改后重新提交]
    S --> M
    R --> T[通知已购买用户]
    
    H --> U[确认下架]
    U --> V[项目下架]
    V --> W[停止新的销售]
    
    I --> X[查看下载量]
    X --> Y[查看收入统计]
    Y --> Z[查看用户评价]
    
    L --> AA[返回项目列表]
    T --> AA
    W --> AA
    Z --> AA
```

## 4. 支付和积分流程

### 4.1 积分充值流程
```mermaid
flowchart TD
    A[进入积分中心] --> B[点击充值按钮]
    B --> C[选择充值金额]
    C --> D[选择支付方式]
    D --> E[Stripe/支付宝/微信支付]
    E --> F[跳转支付页面]
    F --> G[完成支付]
    G --> H{支付是否成功?}
    H -->|否| I[显示支付失败]
    I --> J[重新选择支付方式]
    J --> D
    H -->|是| K[支付成功]
    K --> L[更新积分余额]
    L --> M[记录充值记录]
    M --> N[发送充值成功通知]
    N --> O[返回积分中心]
```

### 4.2 积分提现流程
```mermaid
flowchart TD
    A[进入提现页面] --> B[输入提现金额]
    B --> C{余额是否足够?}
    C -->|否| D[显示余额不足]
    D --> E[跳转充值页面]
    C -->|是| F[选择提现方式]
    F --> G[银行卡/支付宝/微信]
    G --> H[填写账户信息]
    H --> I[确认提现申请]
    I --> J[提交审核]
    J --> K[冻结提现金额]
    K --> L[人工审核]
    L --> M{审核是否通过?}
    M -->|否| N[拒绝提现]
    N --> O[解冻金额]
    O --> P[通知用户]
    M -->|是| Q[批准提现]
    Q --> R[发起转账]
    R --> S{转账是否成功?}
    S -->|否| T[转账失败]
    T --> O
    S -->|是| U[转账成功]
    U --> V[扣除积分]
    V --> W[记录提现记录]
    W --> X[通知用户]
    
    P --> Y[返回积分中心]
    X --> Y
```

## 5. 管理员审核流程

### 5.1 项目审核流程
```mermaid
flowchart TD
    A[登录管理后台] --> B[查看待审核项目]
    B --> C[选择项目进行审核]
    C --> D[查看项目详情]
    D --> E[检查项目信息]
    E --> F[下载项目文件]
    F --> G[代码质量检查]
    G --> H[安全性检查]
    H --> I[功能完整性检查]
    I --> J{是否符合标准?}
    J -->|否| K[拒绝项目]
    K --> L[填写拒绝原因]
    L --> M[通知卖家]
    J -->|是| N[批准项目]
    N --> O[设置项目状态为已发布]
    O --> P[通知卖家]
    P --> Q[项目上架到市场]
    
    M --> R[卖家收到通知]
    R --> S[修改项目]
    S --> T[重新提交审核]
    T --> B
    
    Q --> U[审核完成]
```

### 5.2 用户申诉处理流程
```mermaid
flowchart TD
    A[收到用户申诉] --> B[查看申诉详情]
    B --> C[了解申诉原因]
    C --> D[调查相关信息]
    D --> E[查看用户历史记录]
    E --> F[查看相关交易记录]
    F --> G[联系相关方了解情况]
    G --> H{申诉是否合理?}
    H -->|否| I[拒绝申诉]
    I --> J[回复申诉结果]
    H -->|是| K[接受申诉]
    K --> L[采取相应措施]
    L --> M[退款/恢复账户/其他]
    M --> N[记录处理结果]
    N --> O[通知用户]
    
    J --> P[申诉处理完成]
    O --> P
```

## 6. 错误处理和异常流程

### 6.1 支付失败处理流程
```mermaid
flowchart TD
    A[支付失败] --> B[记录失败原因]
    B --> C{失败类型}
    C -->|网络错误| D[提示网络问题]
    C -->|余额不足| E[提示余额不足]
    C -->|卡片问题| F[提示更换支付方式]
    C -->|其他错误| G[提示联系客服]
    
    D --> H[重试支付]
    E --> I[充值或更换支付方式]
    F --> J[选择其他支付方式]
    G --> K[联系客服]
    
    H --> L{重试是否成功?}
    L -->|是| M[支付成功]
    L -->|否| N[继续显示错误]
    
    I --> O[重新发起支付]
    J --> O
    
    O --> P[进入支付流程]
    
    M --> Q[完成交易]
    N --> R[用户选择其他方案]
    K --> S[客服协助解决]
```

### 6.2 部署失败处理流程
```mermaid
flowchart TD
    A[部署失败] --> B[记录错误日志]
    B --> C{失败原因}
    C -->|镜像构建失败| D[检查Dockerfile]
    C -->|资源不足| E[等待资源释放]
    C -->|配置错误| F[检查配置文件]
    C -->|网络问题| G[重试部署]
    
    D --> H[修复Dockerfile]
    E --> I[自动重试]
    F --> J[修复配置]
    G --> K[网络恢复后重试]
    
    H --> L[重新构建]
    I --> M{资源是否可用?}
    J --> N[重新部署]
    K --> O[重新部署]
    
    L --> P{构建是否成功?}
    P -->|是| Q[继续部署]
    P -->|否| R[通知用户构建失败]
    
    M -->|是| Q
    M -->|否| S[继续等待]
    
    N --> Q
    O --> Q
    
    Q --> T[部署成功]
    R --> U[用户联系技术支持]
    S --> I
    
    T --> V[用户正常使用]
    U --> W[技术支持协助解决]
```
