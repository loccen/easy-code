---
type: "always_apply"
---

# 易码网 (Easy Code) 项目概述

## 项目简介
易码网是一个综合性源代码交易平台，提供双轨上架系统、一键部署、灵活支付适配器、积分系统等功能。

## 技术架构
- **前端**: Next.js 14 + TypeScript + Tailwind CSS
- **后端**: Supabase (PostgreSQL + Auth + Storage + Edge Functions)
- **部署**: Docker + Kubernetes
- **支付**: 多适配器支持 (支付宝、微信、Stripe等)
- **AI服务**: 本地工具集成

## 开发原则

### 1. 架构简化原则
- 初期将大部分服务集成到主应用中
- 仅分离部署编排器服务
- 延迟支付服务集成
- AI容器化手动处理

### 2. 数据库管理
- 使用 Supabase API 直接操作配置
- 先操作 → 调试 → 更新脚本
- 包含所有 RLS 策略修复
- 更新数据库设置脚本以简化未来部署

### 3. 开发流程
- **需求分析** → **测试规划** → **编码实现** → **验证完成**
- 所有文档统一放在 `docs/` 目录下，按类型分子目录
- 将大型开发任务拆分为小的、可独立测试的功能模块
- 每个模块的开发周期控制在合理范围内，避免问题积累
- 测试用例通过后才能认为开发任务完成

### 4. 测试驱动开发策略
- **需求分析阶段**: 明确定义开发目标，包括要实现的具体页面、功能特性和验收标准
- **测试规划阶段**: 基于开发目标编写对应的测试用例
  - 单元测试：覆盖核心业务逻辑和函数
  - 端到端(E2E)测试：覆盖用户关键操作流程
- **开发实施阶段**: 按照测试用例进行实际开发工作
- **验证完成阶段**: 确保所有单元测试通过，作为开发完成的标准
- 遵循"红-绿-重构"的TDD循环：先写失败测试 → 编写最少代码使测试通过 → 重构优化代码

### 5. 质量保证标准
- 使用包管理器而非手动编辑配置文件
- 保持代码简洁和可维护性
- 单元测试覆盖率 ≥ 80%
- 所有测试用例必须通过才能认为开发任务完成
- 测试用例应该具有良好的可读性和维护性
- 提交代码前，必须运行build和lint命令，解决所有编译错误和告警
- 择机进行 Git 提交，避免积累过多改动，当前的改动未完成测试前，不允许提交

## 目录结构
```
easy-code/
├── docs/                    # 项目文档
│   ├── requirements/        # 需求分析
│   ├── architecture/        # 架构设计
│   ├── prototypes/          # 原型设计
│   └── deployment/          # 部署文档
├── src/                     # 源代码
│   ├── lib/                 # 核心库
│   │   ├── api/            # API 相关
│   │   ├── services/       # 业务服务
│   │   └── __tests__/      # 单元测试
├── tests/                   # 集成测试
├── scripts/                 # 脚本文件
└── deployment/              # 部署配置
```

## Git 提交规范
- feat: 新功能
- fix: 修复bug
- docs: 文档更新
- style: 代码格式调整
- refactor: 代码重构
- test: 测试相关
- chore: 构建过程或辅助工具的变动

## Supabase 操作流程
1. 使用 Supabase API 直接操作
2. 进行调试和测试
3. 记录操作步骤
4. 更新对应脚本

## 部署策略
- Docker 容器化
- Kubernetes 编排
- 一键部署支持
- 环境配置管理

## 注意事项
- 所有回复使用中文
- 善用可用工具
- 保持频繁的 Git 提交
- 项目未初始化时先进行仓库初始化
- 每次编码后必须运行 `npm run lint` 和 `npm run build`
- 所有类型错误和警告必须在提交前解决
- 新功能开发前必须先提前写好测试用例并保证开发完后测试用例通过
